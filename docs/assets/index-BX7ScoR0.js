import{c as ie,a as R,o as D,b as s,d as W,r as re,t as I,F as ge,e as ye,n as pe,f as le,g as G,w as ke,h as u,i as Me,j as ve,k as be,l as Ee,m as ue,p as we,q as se,s as Le,u as N,v as J,x as ze,y as fe,z as Be}from"./vendor-CK93Da5T.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))t(h);new MutationObserver(h=>{for(const f of h)if(f.type==="childList")for(const m of f.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&t(m)}).observe(document,{childList:!0,subtree:!0});function a(h){const f={};return h.integrity&&(f.integrity=h.integrity),h.referrerPolicy&&(f.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?f.credentials="include":h.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function t(h){if(h.ep)return;h.ep=!0;const f=a(h);fetch(h.href,f)}})();typeof globalThis>"u"&&(window.global=window);typeof process>"u"&&(window.process={env:{}});(typeof crypto>"u"||!crypto.getRandomValues)&&typeof window<"u"&&(window.crypto||(window.crypto={}),window.crypto.getRandomValues||(window.crypto.getRandomValues=function(o){for(let e=0;e<o.length;e++)o[e]=Math.floor(Math.random()*256);return o}));typeof Buffer>"u"&&typeof window<"u"&&(window.Buffer={isBuffer:()=>!1});const de=(o,e)=>{const a=o.__vccOpts||o;for(const[t,h]of e)a[t]=h;return a},He={name:"DraggableElement",props:{element:{type:Object,required:!0},isDragging:{type:Boolean,default:!1},isResizing:{type:Boolean,default:!1},isSelected:{type:Boolean,default:!1},enableResize:{type:Boolean,default:!0},resizeHandles:{type:Array,default:()=>["n","ne","e","se","s","sw","w","nw"]}},emits:["mousedown","click","resize-start"],setup(o,{emit:e}){const a=ie(()=>({left:`${o.element.x}px`,top:`${o.element.y}px`,width:`${o.element.width}px`,height:`${o.element.height}px`})),t=ie(()=>Array.isArray(o.resizeHandles)?o.resizeHandles:["n","ne","e","se","s","sw","w","nw"]),h=ie(()=>o.isResizing);return{elementStyle:a,resizeHandlesArray:t,showSizeHint:h,handleMouseDown:S=>{e("mousedown",S,o.element)},handleClick:S=>{S.stopPropagation(),e("click",S,o.element)},handleMouseUp:S=>{},handleResizeStart:(S,y)=>{e("resize-start",S,o.element,y)}}}},Fe={class:"element-content"},Ue={key:0,class:"size-hint"},Ve={class:"size-text"},Ge={key:1,class:"element-handles"},Ie=["onMousedown"];function _e(o,e,a,t,h,f){return D(),R("div",{class:le(["draggable-element",{dragging:a.isDragging},{resizing:a.isResizing},{selected:a.isSelected}]),style:pe(t.elementStyle),onMousedown:e[0]||(e[0]=(...m)=>t.handleMouseDown&&t.handleMouseDown(...m)),onClick:e[1]||(e[1]=(...m)=>t.handleClick&&t.handleClick(...m)),onMouseup:e[2]||(e[2]=(...m)=>t.handleMouseUp&&t.handleMouseUp(...m))},[s("div",Fe,[re(o.$slots,"default",{element:a.element},()=>[G(I(a.element.content),1)])]),a.isResizing&&t.showSizeHint?(D(),R("div",Ue,[s("span",Ve,I(a.element.width)+" × "+I(a.element.height),1)])):W("",!0),a.enableResize?(D(),R("div",Ge,[(D(!0),R(ge,null,ye(t.resizeHandlesArray,m=>(D(),R("div",{key:m,class:le(["resize-handle",m]),onMousedown:ke(i=>t.handleResizeStart(i,m),["stop"])},null,42,Ie))),128))])):W("",!0)],38)}const Ae=de(He,[["render",_e],["__scopeId","data-v-5d614bc9"]]),Oe={name:"PerformancePanel",props:{visible:{type:Boolean,default:!0},title:{type:String,default:"性能监控"},showCloseButton:{type:Boolean,default:!1},position:{type:String,default:"top-right",validator:o=>["top-right","top-left","bottom-right","bottom-left"].includes(o)},showFps:{type:Boolean,default:!0},showRenderTime:{type:Boolean,default:!0},showDragTime:{type:Boolean,default:!0},showMemoryUsage:{type:Boolean,default:!0},showElementCount:{type:Boolean,default:!0},showTotalElements:{type:Boolean,default:!1},metrics:{type:Object,default:()=>({fps:0,renderTime:0,dragTime:0,memoryUsage:0})},elementCount:{type:Number,default:0},totalElements:{type:Number,default:0},theme:{type:String,default:"dark"},compact:{type:Boolean,default:!1}},emits:["close","drag-start","drag-move","drag-end"],setup(o,{emit:e}){const a=u(!1),t=u({x:0,y:0}),h=u(null),f=y=>y>=55?"fps-excellent":y>=45?"fps-good":y>=30?"fps-warning":"fps-poor",m=y=>{if(!o.draggable)return;a.value=!0;const P=h.value.getBoundingClientRect();t.value={x:y.clientX-P.left,y:y.clientY-P.top},document.addEventListener("mousemove",i),document.addEventListener("mouseup",p),e("drag-start",y)},i=y=>{if(!a.value)return;const P=y.clientX-t.value.x,X=y.clientY-t.value.y;h.value&&(h.value.style.left=`${P}px`,h.value.style.top=`${X}px`),e("drag-move",y)},p=y=>{a.value=!1,document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",p),e("drag-end",y)},S=()=>{e("close")};return Me(()=>{document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",p)}),{isDragging:a,panelRef:h,getFpsClass:f,startDrag:m,close:S}}},Ne={class:"panel-title"},We={class:"performance-metrics"},Xe={key:0,class:"metric-item"},Ye={key:1,class:"metric-item"},je={class:"metric-value"},Ke={key:2,class:"metric-item"},qe={class:"metric-value"},Je={key:3,class:"metric-item"},Qe={class:"metric-value"},Ze={key:4,class:"metric-item"},$e={class:"metric-value"},et={key:5,class:"metric-item"},tt={class:"metric-value"};function nt(o,e,a,t,h,f){return a.visible?(D(),R("div",{key:0,class:le(["performance-panel",a.position])},[s("div",{class:"performance-header",onMousedown:e[1]||(e[1]=(...m)=>t.startDrag&&t.startDrag(...m))},[s("span",Ne,I(a.title),1),a.showCloseButton?(D(),R("button",{key:0,onClick:e[0]||(e[0]=(...m)=>t.close&&t.close(...m)),class:"close-btn"}," × ")):W("",!0)],32),s("div",We,[a.showFps?(D(),R("div",Xe,[e[2]||(e[2]=s("span",{class:"metric-label"},"FPS:",-1)),s("span",{class:le(["metric-value",t.getFpsClass(a.metrics.fps)])},I(a.metrics.fps),3)])):W("",!0),a.showRenderTime?(D(),R("div",Ye,[e[3]||(e[3]=s("span",{class:"metric-label"},"渲染时间:",-1)),s("span",je,I(a.metrics.renderTime.toFixed(1))+"ms ",1)])):W("",!0),a.showDragTime?(D(),R("div",Ke,[e[4]||(e[4]=s("span",{class:"metric-label"},"拖拽时间:",-1)),s("span",qe,I(a.metrics.dragTime.toFixed(1))+"ms ",1)])):W("",!0),a.showMemoryUsage&&a.metrics.memoryUsage>0?(D(),R("div",Je,[e[5]||(e[5]=s("span",{class:"metric-label"},"内存:",-1)),s("span",Qe,I(a.metrics.memoryUsage)+"MB ",1)])):W("",!0),a.showElementCount?(D(),R("div",Ze,[e[6]||(e[6]=s("span",{class:"metric-label"},"可见元素:",-1)),s("span",$e,I(a.elementCount),1)])):W("",!0),a.showTotalElements?(D(),R("div",et,[e[7]||(e[7]=s("span",{class:"metric-label"},"总元素:",-1)),s("span",tt,I(a.totalElements),1)])):W("",!0),re(o.$slots,"custom-metrics",{},void 0)])],2)):W("",!0)}const ot=de(Oe,[["render",nt],["__scopeId","data-v-6f75f1c9"]]);function at(o={}){const{onDragStart:e,onDragMove:a,onDragEnd:t,onResizeStart:h,onResizeMove:f,onResizeEnd:m,snapDistance:i=10,enableSnap:p=!0,enableResize:S=!0,elements:y=u([]),workspaceRef:P=u(null),measureDrag:X=null,multiSelect:F=null}=o,U=u(null),B=u(null),_=u([]),Y=ve({x:0,y:0}),v=(r,d,l)=>{if(r.target.classList.contains("resize-handle"))return;if(F&&F.isElementSelected(d.id)&&F.getSelectedCount()>1){F.startMultiDrag(r,d,l);return}U.value=d.id;const M=l.getBoundingClientRect();d.startX=r.clientX-M.left-d.x,d.startY=r.clientY-M.top-d.y,z(d.id,y);const g=x=>T(x,l),w=()=>k();document.addEventListener("mousemove",g),document.addEventListener("mouseup",w),d._dragMoveHandler=g,d._dragEndHandler=w,e==null||e(d,r)},z=(r,d)=>{const l=d.value.find(g=>g.id===r);if(!l)return;const M=d.value.findIndex(g=>g.id===r);M>-1&&(d.value.splice(M,1),d.value.push(l))},b=(r,d,l="se")=>{B.value=d.id,r.stopPropagation(),P.value.getBoundingClientRect(),d._resizeStartState={x:d.x,y:d.y,width:d.width,height:d.height,startX:r.clientX,startY:r.clientY,direction:l};const M=w=>L(w),g=()=>V();document.addEventListener("mousemove",M),document.addEventListener("mouseup",g),d._resizeMoveHandler=M,d._resizeEndHandler=g,h==null||h(d,r,l)},T=(r,d)=>{if(F&&F.isMultiDragging.value){F.handleMultiDrag(r,d);return}if(!U.value)return;const l=y.value.find(g=>g.id===U.value);if(!l)return;const M=()=>{const g=d.getBoundingClientRect();let w=r.clientX-g.left-l.startX,x=r.clientY-g.top-l.startY;if(w=Math.max(0,Math.min(w,g.width-l.width)),x=Math.max(0,Math.min(x,g.height-l.height)),p){const E=j(l,w,x,y.value,i);w=E.x,x=E.y,_.value=E.snapLines}else _.value=[];l.x=w,l.y=x,a==null||a(l,r)};X?X(M):M()},k=()=>{if(F&&F.isMultiDragging.value){F.stopMultiDrag();return}const r=y.value.find(d=>d.id===U.value);r&&(t==null||t(r),r._dragMoveHandler&&(document.removeEventListener("mousemove",r._dragMoveHandler),delete r._dragMoveHandler),r._dragEndHandler&&(document.removeEventListener("mouseup",r._dragEndHandler),delete r._dragEndHandler)),U.value=null,_.value=[]},L=r=>{if(!B.value)return;const d=y.value.find(te=>te.id===B.value);if(!d)return;const l=d._resizeStartState;if(!l)return;P.value.getBoundingClientRect();const M=r.clientX-l.startX,g=r.clientY-l.startY;let w=l.x,x=l.y,E=l.width,n=l.height;switch(l.direction){case"se":E=Math.max(50,l.width+M),n=Math.max(30,l.height+g);break;case"sw":w=l.x+M,E=Math.max(50,l.width-M),n=Math.max(30,l.height+g);break;case"ne":x=l.y+g,E=Math.max(50,l.width+M),n=Math.max(30,l.height-g);break;case"nw":w=l.x+M,x=l.y+g,E=Math.max(50,l.width-M),n=Math.max(30,l.height-g);break;case"n":x=l.y+g,n=Math.max(30,l.height-g);break;case"s":n=Math.max(30,l.height+g);break;case"e":E=Math.max(50,l.width+M);break;case"w":w=l.x+M,E=Math.max(50,l.width-M);break}w<0&&(E+=w,w=0),x<0&&(n+=x,x=0),E<50&&(E=50),n<30&&(n=30);const $=K(d,w,x,E,n,y.value,i);_.value=$,d.x=w,d.y=x,d.width=E,d.height=n,f==null||f(d,r)},V=()=>{const r=y.value.find(d=>d.id===B.value);r&&(m==null||m(r),r._resizeStartState&&delete r._resizeStartState,r._resizeMoveHandler&&(document.removeEventListener("mousemove",r._resizeMoveHandler),delete r._resizeMoveHandler),r._resizeEndHandler&&(document.removeEventListener("mouseup",r._resizeEndHandler),delete r._resizeEndHandler)),_.value=[],B.value=null},j=(r,d,l,M,g)=>{const w=[];let x=d,E=l;return M.forEach(n=>{if(n.id===r.id)return;const $=d+r.width/2,te=l+r.height/2,q=n.x+n.width/2,Z=n.y+n.height/2;Math.abs($-q)<g&&(x=q-r.width/2,w.push({id:`center-x-${n.id}`,type:"vertical",x:q,y1:Math.min(l,n.y),y2:Math.max(l+r.height,n.y+n.height)})),Math.abs(te-Z)<g&&(E=Z-r.height/2,w.push({id:`center-y-${n.id}`,type:"horizontal",y:Z,x1:Math.min(d,n.x),x2:Math.max(d+r.width,n.x+n.width)})),Math.abs(d-n.x)<g&&(x=n.x,w.push({id:`left-${n.id}`,type:"vertical",x:n.x,y1:Math.min(l,n.y),y2:Math.max(l+r.height,n.y+n.height)})),Math.abs(d+r.width-n.x-n.width)<g&&(x=n.x+n.width-r.width,w.push({id:`right-${n.id}`,type:"vertical",x:n.x+n.width,y1:Math.min(l,n.y),y2:Math.max(l+r.height,n.y+n.height)})),Math.abs(l-n.y)<g&&(E=n.y,w.push({id:`top-${n.id}`,type:"horizontal",y:n.y,x1:Math.min(d,n.x),x2:Math.max(d+r.width,n.x+n.width)})),Math.abs(l+r.height-n.y-n.height)<g&&(E=n.y+n.height-r.height,w.push({id:`bottom-${n.id}`,type:"horizontal",y:n.y+n.height,x1:Math.min(d,n.x),x2:Math.max(d+r.width,n.x+n.width)}))}),{x,y:E,snapLines:w}},K=(r,d,l,M,g,w,x)=>{const E=[];return w.forEach(n=>{if(n.id===r.id)return;const $=d+M/2,te=l+g/2,q=n.x+n.width/2,Z=n.y+n.height/2;Math.abs($-q)<x&&E.push({id:`center-x-${n.id}`,type:"vertical",x:q,y1:Math.min(l,n.y),y2:Math.max(l+g,n.y+n.height),style:"center"}),Math.abs(te-Z)<x&&E.push({id:`center-y-${n.id}`,type:"horizontal",y:Z,x1:Math.min(d,n.x),x2:Math.max(d+M,n.x+n.width),style:"center"}),Math.abs(d-n.x)<x&&E.push({id:`left-${n.id}`,type:"vertical",x:n.x,y1:Math.min(l,n.y),y2:Math.max(l+g,n.y+n.height),style:"edge"}),Math.abs(d+M-n.x-n.width)<x&&E.push({id:`right-${n.id}`,type:"vertical",x:n.x+n.width,y1:Math.min(l,n.y),y2:Math.max(l+g,n.y+n.height),style:"edge"}),Math.abs(l-n.y)<x&&E.push({id:`top-${n.id}`,type:"horizontal",y:n.y,x1:Math.min(d,n.x),x2:Math.max(d+M,n.x+n.width),style:"edge"}),Math.abs(l+g-n.y-n.height)<x&&E.push({id:`bottom-${n.id}`,type:"horizontal",y:n.y+n.height,x1:Math.min(d,n.x),x2:Math.max(d+M,n.x+n.width),style:"edge"}),Math.abs(M-n.width)<x&&E.push({id:`width-match-${n.id}`,type:"width-match",x:d+M,y:l+g,width:n.width,style:"size-match"}),Math.abs(g-n.height)<x&&E.push({id:`height-match-${n.id}`,type:"height-match",x:d+M,y:l+g,height:n.height,style:"size-match"})}),E},A=(r,d)=>{if(d){const l=d.getBoundingClientRect();Y.x=r.clientX-l.left,Y.y=r.clientY-l.top}},O=()=>{};return Me(()=>{y.value.forEach(r=>{r._dragMoveHandler&&(document.removeEventListener("mousemove",r._dragMoveHandler),delete r._dragMoveHandler),r._dragEndHandler&&(document.removeEventListener("mouseup",r._dragEndHandler),delete r._dragEndHandler),r._resizeMoveHandler&&(document.removeEventListener("mousemove",r._resizeMoveHandler),delete r._resizeMoveHandler),r._resizeEndHandler&&(document.removeEventListener("mouseup",r._resizeEndHandler),delete r._resizeEndHandler)})}),{draggingId:U,resizingId:B,snapLines:_,mousePos:Y,startDrag:v,startResize:b,handleMouseMove:A,handleMouseLeave:O}}function it(o={}){const{elements:e=u([]),onSelectionChange:a,onMultiDragStart:t,onMultiDragMove:h,onMultiDragEnd:f}=o,m=u(new Set),i=u(!1),p=ve({x:0,y:0}),S=u(new Map),y=ve({x:0,y:0}),P=b=>b.metaKey||b.ctrlKey,X=(b,T)=>{P(T)?m.value.has(b)?m.value.delete(b):m.value.add(b):(m.value.clear(),m.value.add(b)),a==null||a(Array.from(m.value))},F=()=>{m.value.clear(),a==null||a([])},U=()=>e.value.filter(b=>m.value.has(b.id));return{selectedElements:m,isMultiDragging:i,selectElement:X,clearSelection:F,getSelectedElements:U,startMultiDrag:(b,T,k)=>{if(m.value.size===0)return;i.value=!0;const L=k.getBoundingClientRect();p.x=b.clientX-L.left-T.x,p.y=b.clientY-L.top-T.y,S.value.clear();const V=U();let j=0,K=0;V.forEach(A=>{const O=A.x+A.width/2,r=A.y+A.height/2;j+=O,K+=r,S.value.set(A.id,{x:A.x,y:A.y,centerX:O,centerY:r})}),j/=V.length,K/=V.length,y.x=j,y.y=K,t==null||t(V,b)},handleMultiDrag:(b,T)=>{if(!i.value||m.value.size===0)return;const k=T.getBoundingClientRect(),L=U(),V=b.clientX-k.left-p.x,j=b.clientY-k.top-p.y,K=V-y.x,A=j-y.y;L.forEach(O=>{const r=S.value.get(O.id);if(r){let d=r.x+K,l=r.y+A;const M=0,g=k.width-O.width,w=0,x=k.height-O.height;d<M?d=M:d>g&&(d=g),l<w?l=w:l>x&&(l=x),O.x=d,O.y=l}}),h==null||h(L,b)},stopMultiDrag:()=>{i.value&&(i.value=!1,S.value.clear(),f==null||f(U()))},isElementSelected:b=>m.value.has(b),getSelectedCount:()=>m.value.size,isCommandPressed:P}}function rt(o={}){const{containerRef:e,elements:a=u([]),itemHeight:t=80,itemWidth:h=120,buffer:f=5}=o,m=u([]),i=u(0),p=u(0),S=()=>{const P=e.value;if(!P||!a.value||a.value.length===0){m.value=[];return}const{width:X,height:F}=P.getBoundingClientRect(),U=Math.floor(i.value/t),B=Math.ceil((i.value+F)/t),_=Math.floor(p.value/h),Y=Math.ceil((p.value+X)/h),v=Math.max(0,U-f),z=B+f,b=Math.max(0,_-f),T=Y+f;m.value=a.value.filter(k=>{const L=Math.floor(k.y/t),V=Math.floor(k.x/h);return L>=v&&L<=z&&V>=b&&V<=T})};return{visibleItems:m,calculateVisibleItems:S,handleScroll:P=>{P&&P.target&&(i.value=P.target.scrollTop||0,p.value=P.target.scrollLeft||0,S())}}}class lt{constructor(e=100){this.cellSize=e,this.grid=new Map}getGridKey(e,a){const t=Math.floor(e/this.cellSize),h=Math.floor(a/this.cellSize);return`${t},${h}`}addElement(e){if(!e||typeof e.x!="number"||typeof e.y!="number")return;const a=this.getGridKey(e.x,e.y);this.grid.has(a)||this.grid.set(a,[]),this.grid.get(a).push(e)}getNearbyElements(e){if(!e||typeof e.x!="number"||typeof e.y!="number")return[];const a=new Set,t=e.x+(e.width||0)/2,h=e.y+(e.height||0)/2;for(let f=-1;f<=1;f++)for(let m=-1;m<=1;m++){const i=this.getGridKey(t+f*this.cellSize,h+m*this.cellSize);(this.grid.get(i)||[]).forEach(S=>{S.id!==e.id&&a.add(S)})}return Array.from(a)}updateGrid(e){this.grid.clear(),Array.isArray(e)&&e.forEach(a=>this.addElement(a))}}function st(o,e){let a,t=0;return function(...h){const f=Date.now();f-t>e?(o.apply(this,h),t=f):(clearTimeout(a),a=setTimeout(()=>{o.apply(this,h),t=Date.now()},e-(f-t)))}}class dt{constructor(){this.metrics={fps:0,renderTime:0,dragTime:0,memoryUsage:0},this.frameCount=0,this.lastTime=performance.now(),this.frameStart=0,this.frameTimes=[]}startFrame(){this.frameStart=performance.now()}endFrame(){if(this.frameStart>0){const a=performance.now()-this.frameStart;this.metrics.renderTime=a,this.frameTimes.push(a),this.frameTimes.length>10&&this.frameTimes.shift()}this.frameCount++;const e=performance.now();if(e-this.lastTime>=1e3){if(this.metrics.fps=Math.round(this.frameCount),this.frameCount=0,this.lastTime=e,this.frameTimes.length>0){const a=this.frameTimes.reduce((t,h)=>t+h,0)/this.frameTimes.length;this.metrics.renderTime=a}performance.memory&&(this.metrics.memoryUsage=Math.round(performance.memory.usedJSHeapSize/1024/1024))}}measureDrag(e){const a=performance.now(),t=e();return this.metrics.dragTime=performance.now()-a,t}getMetrics(){return{...this.metrics}}}function ct(o={}){const{enableVirtualization:e=!0,enableSpatialGrid:a=!0,enableThrottling:t=!0,enableMonitoring:h=!0}=o,f=h?new dt:null,m=a?new lt(100):null,i=u(null),{visibleItems:p,calculateVisibleItems:S,handleScroll:y}=rt({containerRef:i,elements:o.elements||u([]),itemHeight:o.itemHeight||80,itemWidth:o.itemWidth||120,buffer:o.buffer||5}),P=t?st(o.handleDrag||(()=>{}),16):o.handleDrag||(()=>{});return{containerRef:i,visibleItems:p,calculateVisibleItems:S,handleScroll:y,startFrame:()=>{f&&f.startFrame()},endFrame:()=>{f&&f.endFrame()},getPerformanceMetrics:()=>f?f.getMetrics():{fps:0,renderTime:0,dragTime:0,memoryUsage:0},measureDrag:v=>f?f.measureDrag(v):v(),updateSpatialGrid:v=>{m&&m.updateGrid(v)},getNearbyElements:v=>m?m.getNearbyElements(v):[],throttledHandleDrag:P}}const ut={name:"OptimizedFreeLayoutWorkspace",components:{DraggableElement:Ae,PerformancePanel:ot},props:{elements:{type:Array,required:!0},showGrid:{type:Boolean,default:!0},enableResize:{type:Boolean,default:!0},resizeHandles:{type:Array,default:()=>["n","ne","e","se","s","sw","w","nw"]},snapDistance:{type:Number,default:10},enableSnap:{type:Boolean,default:!0},enableVirtualization:{type:Boolean,default:!0},enableSpatialGrid:{type:Boolean,default:!0},enableThrottling:{type:Boolean,default:!0},enableMonitoring:{type:Boolean,default:!1},showPerformancePanel:{type:Boolean,default:!0},itemHeight:{type:Number,default:80},itemWidth:{type:Number,default:120},buffer:{type:Number,default:5},performancePanelPosition:{type:String,default:"top-right"},performancePanelTheme:{type:String,default:"dark"},performancePanelCompact:{type:Boolean,default:!1},enableMultiSelect:{type:Boolean,default:!0}},emits:["update:elements","drag-start","drag-move","drag-end","resize-start","resize-move","resize-end","selection-change","multi-drag-start","multi-drag-move","multi-drag-end"],setup(o,{emit:e}){const a=u(null),t=u(o.elements),h=u(o.performancePanelPosition),f=u(o.performancePanelTheme),m=u(o.performancePanelCompact),i=u(o.showFps),p=u(o.showRenderTime),S=u(o.showDragTime),y=u(o.showMemoryUsage),P=u(o.showElementCount),X=u(o.showTotalElements),F=u(o.showPerformancePanelCloseButton),U=()=>{e("performance-panel-close")},B=it({elements:t,onSelectionChange:c=>{e("selection-change",c)},onMultiDragStart:(c,C)=>{e("multi-drag-start",c,C)},onMultiDragMove:(c,C)=>{e("multi-drag-move",c,C)},onMultiDragEnd:c=>{e("multi-drag-end",c)}}),{visibleItems:_,calculateVisibleItems:Y,handleScroll:v,startFrame:z,endFrame:b,getPerformanceMetrics:T,updateSpatialGrid:k,measureDrag:L}=ct({enableVirtualization:o.enableVirtualization,enableSpatialGrid:o.enableSpatialGrid,enableThrottling:o.enableThrottling,enableMonitoring:o.enableMonitoring,showPerformancePanel:o.showPerformancePanel,elements:t,itemHeight:o.itemHeight,itemWidth:o.itemWidth,buffer:o.buffer}),{draggingId:V,resizingId:j,snapLines:K,mousePos:A,startDrag:O,startResize:r,handleMouseMove:d,handleMouseLeave:l}=at({elements:t,workspaceRef:a,snapDistance:o.snapDistance,enableSnap:o.enableSnap,measureDrag:L,multiSelect:o.enableMultiSelect?B:null,onDragStart:(c,C)=>{e("drag-start",c,C)},onDragMove:(c,C)=>{e("drag-move",c,C)},onDragEnd:c=>{e("drag-end",c)},onResizeStart:(c,C,ne)=>{e("resize-start",c,C,ne)},onResizeMove:(c,C)=>{e("resize-move",c,C)},onResizeEnd:c=>{e("resize-end",c)}}),M=u({fps:0,renderTime:0,dragTime:0,memoryUsage:0}),g=()=>{if(o.showPerformancePanel||o.enableMonitoring){const c=T();M.value={fps:c.fps||0,renderTime:c.renderTime||0,dragTime:c.dragTime||0,memoryUsage:c.memoryUsage||0}}},w=c=>{o.enableVirtualization&&v(c)},x=(c,C)=>{O(c,C,a.value)},E=(c,C,ne)=>{r(c,C,ne)},n=c=>{const C={position:"absolute",pointerEvents:"none",zIndex:1e3};return c.type==="horizontal"?{...C,top:`${c.y}px`,left:`${c.x1}px`,width:`${c.x2-c.x1}px`,height:c.style==="center"?"2px":"1px",background:c.style==="center"?"#4ecdc4":"#ff6b6b",opacity:c.style==="center"?"0.9":"0.8"}:c.type==="vertical"?{...C,left:`${c.x}px`,top:`${c.y1}px`,width:c.style==="center"?"2px":"1px",height:`${c.y2-c.y1}px`,background:c.style==="center"?"#4ecdc4":"#ff6b6b",opacity:c.style==="center"?"0.9":"0.8"}:c.type==="width-match"||c.type==="height-match"?{...C,left:`${c.x}px`,top:`${c.y}px`,width:"20px",height:"20px",background:"#ffd93d",borderRadius:"50%",opacity:"0.9",transform:"translate(-50%, -50%)"}:C},$=ie(()=>{if(o.enableVirtualization&&o.elements.length>0){const c=Math.max(...o.elements.map(oe=>(oe.y||0)+(oe.height||0)),1e3),C=window.innerWidth||1200,ne=Math.max(...o.elements.map(oe=>(oe.x||0)+(oe.width||0)),0),he=Math.min(Math.max(ne,C),C);return{height:`${c}px`,width:`${he}px`,position:"relative"}}return{}}),te=ie(()=>!o.enableVirtualization||!_.value||_.value.length===0?o.elements:_.value);be(()=>o.elements,c=>{t.value=c,o.enableSpatialGrid&&k(c),o.enableVirtualization&&Y()},{deep:!0,immediate:!0});let q;const Z=()=>{z(),o.enableVirtualization&&Y(),b(),g(),q=requestAnimationFrame(Z)};Ee(()=>{o.enableVirtualization&&Y(),o.enableSpatialGrid&&k(o.elements),(o.showPerformancePanel||o.enableMonitoring)&&Z()}),Me(()=>{q&&cancelAnimationFrame(q)});const me=(c,C)=>{o.enableMultiSelect&&(B.isCommandPressed(c)||B.clearSelection(),B.selectElement(C.id,c))};return{containerRef:a,draggingId:V,resizingId:j,snapLines:K,mousePos:A,visibleItems:_,displayElements:te,performanceMetrics:M,performancePanelPosition:h,performancePanelTheme:f,performancePanelCompact:m,handleScroll:w,handleElementMouseDown:x,handleResizeStart:E,handleMouseMove:c=>d(c,a.value),handleMouseLeave:l,getSnapLineStyle:n,containerStyle:$,showFps:i,showRenderTime:p,showDragTime:S,showMemoryUsage:y,showElementCount:P,showTotalElements:X,showPerformancePanelCloseButton:F,handlePerformancePanelClose:U,isElementSelected:c=>o.enableMultiSelect?B.isElementSelected(c):!1,getSelectedCount:B.getSelectedCount,handleElementClick:me}}},mt={key:0,class:"grid"},ht={key:1,class:"snap-lines"};function ft(o,e,a,t,h,f){const m=ue("DraggableElement"),i=ue("PerformancePanel");return D(),R("div",{class:"optimized-free-layout-workspace",onScroll:e[0]||(e[0]=(...p)=>t.handleScroll&&t.handleScroll(...p)),ref:"containerRef",onMousemove:e[1]||(e[1]=(...p)=>t.handleMouseMove&&t.handleMouseMove(...p)),onMouseleave:e[2]||(e[2]=(...p)=>t.handleMouseLeave&&t.handleMouseLeave(...p)),onClick:e[3]||(e[3]=(...p)=>o.handleWorkspaceClick&&o.handleWorkspaceClick(...p))},[a.showGrid?(D(),R("div",mt)):W("",!0),t.snapLines.length?(D(),R("div",ht,[(D(!0),R(ge,null,ye(t.snapLines,p=>(D(),R("div",{key:p.id,class:le(["snap-line",p.type]),style:pe(t.getSnapLineStyle(p))},null,6))),128))])):W("",!0),s("div",{class:"virtualized-container",style:pe(t.containerStyle)},[(D(!0),R(ge,null,ye(t.displayElements,p=>(D(),we(m,{key:p.id,element:p,"is-dragging":p.id===t.draggingId,"is-resizing":p.id===t.resizingId,"is-selected":t.isElementSelected(p.id),"enable-resize":a.enableResize,"resize-handles":a.resizeHandles,onMousedown:t.handleElementMouseDown,onClick:t.handleElementClick,onResizeStart:t.handleResizeStart},{default:se(({element:S})=>[re(o.$slots,"element-content",{element:S},()=>[G(I(S.content),1)],!0)]),_:2},1032,["element","is-dragging","is-resizing","is-selected","enable-resize","resize-handles","onMousedown","onClick","onResizeStart"]))),128))],4),a.showPerformancePanel?(D(),we(i,{key:2,visible:a.showPerformancePanel,metrics:t.performanceMetrics,"element-count":t.displayElements.length,"total-elements":a.elements.length,position:t.performancePanelPosition,theme:t.performancePanelTheme,compact:t.performancePanelCompact,"show-fps":t.showFps,"show-render-time":t.showRenderTime,"show-drag-time":t.showDragTime,"show-memory-usage":t.showMemoryUsage,"show-element-count":t.showElementCount,"show-total-elements":t.showTotalElements,"show-close-button":t.showPerformancePanelCloseButton,onClose:t.handlePerformancePanelClose},{"custom-metrics":se(()=>[re(o.$slots,"custom-performance-metrics",{},void 0,!0)]),_:3},8,["visible","metrics","element-count","total-elements","position","theme","compact","show-fps","show-render-time","show-drag-time","show-memory-usage","show-element-count","show-total-elements","show-close-button","onClose"])):W("",!0)],544)}const gt=de(ut,[["render",ft],["__scopeId","data-v-d07db891"]]);function yt(o={}){const{initialElements:e=[],generateId:a=()=>Date.now()+Math.random()}=o,t=u(e);let h=0;const f=(v={})=>{const z=window.innerWidth||1200,b=window.innerHeight||800,T=Math.max(0,z-170),k=Math.max(0,b-130),L={id:a(),x:Math.min(Math.random()*400+50,T),y:Math.min(Math.random()*300+50,k),width:120,height:80,content:`元素 ${++h}`,startX:0,startY:0,...v};return t.value.push(L),L},m=v=>{const z=t.value.findIndex(b=>b.id===v);return z>-1?(t.value.splice(z,1),!0):!1},i=(v,z)=>{const b=t.value.find(T=>T.id===v);return b?(Object.assign(b,z),!0):!1},p=v=>t.value.find(z=>z.id===v),S=()=>{t.value=[],h=0};return{elements:t,addElement:f,removeElement:m,updateElement:i,getElement:p,clearElements:S,addElements:v=>{v.forEach(z=>{f(z)})},getElementCount:()=>t.value.length,exportLayout:()=>t.value.map(v=>({id:v.id,x:v.x,y:v.y,width:v.width,height:v.height,content:v.content})),importLayout:v=>{S(),v.forEach(z=>{f(z)})},duplicateElement:v=>{const z=p(v);if(z){const b={...z,id:a(),x:z.x+20,y:z.y+20,content:`${z.content} (副本)`};return t.value.push(b),b}return null},bringToFront:v=>{const z=p(v);if(z){const b=t.value.findIndex(T=>T.id===v);b>-1&&(t.value.splice(b,1),t.value.push(z))}},sendToBack:v=>{const z=p(v);if(z){const b=t.value.findIndex(T=>T.id===v);b>-1&&(t.value.splice(b,1),t.value.unshift(z))}},generateTestElements:(v=1e3)=>{console.log(`开始生成 ${v} 个测试元素...`),S();const z=[],b=window.innerWidth||1200,T=window.innerHeight||800,k=Math.max(0,b-170),L=Math.max(0,T-130),V=Math.floor(k/140),j=Math.floor(L/100),K=V*j,A=v>K;console.log(`使用${A?"随机":"网格"}布局，最大X: ${k}, 最大Y: ${L}`);const O=100,r=Math.ceil(v/O);for(let d=0;d<r;d++){const l=d*O,M=Math.min(l+O,v);for(let g=l;g<M;g++){let w,x;if(A)w=Math.random()*k,x=Math.random()*L;else{const n=Math.floor(g/V);w=g%V*140+20,x=n*100+20}const E={id:a(),x:Math.max(0,Math.min(w,k)),y:Math.max(0,Math.min(x,L)),width:120,height:80,content:`测试元素 ${g+1}`,startX:0,startY:0};z.push(E)}}return t.value=z,h=v,console.log(`成功生成 ${z.length} 个测试元素`),z}}}const pt={name:"OptimizedFreeLayoutApp",components:{OptimizedFreeLayoutWorkspace:gt},props:{title:{type:String,default:"优化版自由布局Demo"},initialElements:{type:Array,default:()=>[]},showGrid:{type:Boolean,default:!0},enableResize:{type:Boolean,default:!0},resizeHandles:{type:Array,default:()=>["se"]},snapDistance:{type:Number,default:10},enableSnap:{type:Boolean,default:!0},enableVirtualization:{type:Boolean,default:!0},enableSpatialGrid:{type:Boolean,default:!0},enableThrottling:{type:Boolean,default:!0},enableMonitoring:{type:Boolean,default:!1},showPerformancePanel:{type:Boolean,default:!1},performancePanelPosition:{type:String,default:"top-right"},performancePanelTheme:{type:String,default:"dark"},performancePanelCompact:{type:Boolean,default:!1},showFps:{type:Boolean,default:!0},showRenderTime:{type:Boolean,default:!0},showDragTime:{type:Boolean,default:!0},showMemoryUsage:{type:Boolean,default:!0},showElementCount:{type:Boolean,default:!0},showTotalElements:{type:Boolean,default:!1},showPerformancePanelCloseButton:{type:Boolean,default:!1},itemHeight:{type:Number,default:80},itemWidth:{type:Number,default:120},buffer:{type:Number,default:5},showConfigPanel:{type:Boolean,default:!1}},emits:["element-added","element-removed","element-updated","layout-exported","layout-imported","drag-start","drag-move","drag-end","resize-start","resize-move","resize-end","grid-toggled","performance-panel-close"],setup(o,{emit:e}){const a=u(null),t=u(!1),h=u(!1),f=u(0),m=u({fps:0,renderTime:0,dragTime:0,memoryUsage:0}),{elements:i,addElement:p,removeElement:S,updateElement:y,clearElements:P,generateTestElements:X}=yt({initialElements:o.initialElements}),F=u(!0),U=u(!0),B=u(!0),_=u(!0),Y=u(!0),v=u(100),z=u(!1),b=u(!0),T=u("top-right"),k=u("dark"),L=u(!1),V=u(!0),j=u(!0),K=u(!0),A=u(!0),O=u(!0),r=u(!1),d=u(!1),l=u(80),M=u(120),g=u(5),w=u(!0),x=u(!0),E=u(["n","ne","e","se","s","sw","w","nw"]),n=u(10),$=u(!0),te=u(!0),q=u(!1),Z=ie(()=>i.value.length),me=()=>{w.value=!w.value,e("grid-toggled",w.value)},xe=()=>{const H={elements:i.value,timestamp:Date.now()},Q=JSON.stringify(H,null,2),ae=new Blob([Q],{type:"application/json"}),ce=URL.createObjectURL(ae),ee=document.createElement("a");ee.href=ce,ee.download=`layout-${Date.now()}.json`,ee.click(),URL.revokeObjectURL(ce),e("layout-exported",H)},c=()=>{var H;(H=a.value)==null||H.click()},C=H=>{const Q=H.target.files[0];if(Q){const ae=new FileReader;ae.onload=ce=>{try{const ee=JSON.parse(ce.target.result);ee.elements&&Array.isArray(ee.elements)&&(P(),ee.elements.forEach(Re=>{p(Re)}),e("layout-imported",ee))}catch(ee){console.error("导入布局数据失败:",ee)}},ae.readAsText(Q)}H.target.value=""},ne=(H,Q)=>{t.value=!0,e("drag-start",H,Q)},he=(H,Q)=>{e("drag-move",H,Q)},oe=H=>{t.value=!1,e("drag-end",H)},Se=(H,Q,ae)=>{h.value=!0,e("resize-start",H,Q,ae)},Pe=(H,Q)=>{e("resize-move",H,Q)},Ce=H=>{h.value=!1,e("resize-end",H)},De=()=>{b.value=!1,e("performance-panel-close")},Te=()=>{q.value=!q.value};return be(m,H=>{H.fps<30&&console.warn("性能警告: FPS低于30")},{deep:!0}),be([F,U,B,_,b,T,k,L,V,j,K,A,O,r,d],()=>{console.log("性能配置已更新")}),Ee(()=>{i.value.length===0&&(p(),p(),p())}),{elements:i,addElement:p,removeElement:S,updateElement:y,clearElements:P,generateTestElements:X,elementCount:Z,enableVirtualization:F,enableSpatialGrid:U,enableThrottling:B,enableMonitoring:_,enableComponentPool:Y,componentPoolMaxSize:v,showComponentPoolStats:z,showPerformancePanel:b,performancePanelPosition:T,performancePanelTheme:k,performancePanelCompact:L,showFps:V,showRenderTime:j,showDragTime:K,showMemoryUsage:A,showElementCount:O,showTotalElements:r,showPerformancePanelCloseButton:d,itemHeight:l,itemWidth:M,buffer:g,showGrid:w,enableResize:x,resizeHandles:E,snapDistance:n,enableSnap:$,enableMultiSelect:te,showConfigPanel:q,isDragging:t,isResizing:h,snapLinesCount:f,performanceMetrics:m,toggleGrid:me,exportLayoutData:xe,importLayoutData:c,handleFileImport:C,handleDragStart:ne,handleDragMove:he,handleDragEnd:oe,handleResizeStart:Se,handleResizeMove:Pe,handleResizeEnd:Ce,handlePerformancePanelClose:De,toggleConfigPanel:Te,fileInput:a}}},vt={class:"optimized-free-layout-app"},bt={class:"header"},wt={class:"controls"},Mt={class:"workspace-container"},xt={class:"custom-element-content"},zt={class:"element-title"},Et={class:"element-info"},St={class:"status"},Pt={key:0},Ct={key:1},Dt={key:2},Tt={key:0,class:"config-panel"},Rt={class:"config-items"},kt={key:0,class:"config-items"},Lt={class:"config-items"};function Bt(o,e,a,t,h,f){const m=ue("OptimizedFreeLayoutWorkspace");return D(),R("div",vt,[s("div",bt,[s("h1",null,I(a.title),1),s("div",wt,[s("button",{onClick:e[0]||(e[0]=(...i)=>t.addElement&&t.addElement(...i))},"添加元素"),s("button",{onClick:e[1]||(e[1]=(...i)=>t.toggleGrid&&t.toggleGrid(...i))},"切换网格"),s("button",{onClick:e[2]||(e[2]=(...i)=>t.clearElements&&t.clearElements(...i))},"清空"),s("button",{onClick:e[3]||(e[3]=(...i)=>t.exportLayoutData&&t.exportLayoutData(...i))},"导出布局"),s("button",{onClick:e[4]||(e[4]=(...i)=>t.importLayoutData&&t.importLayoutData(...i))},"导入布局"),s("button",{onClick:e[5]||(e[5]=i=>t.generateTestElements(100)),class:"test-btn"}," 生成测试元素 "),s("button",{onClick:e[6]||(e[6]=(...i)=>t.toggleConfigPanel&&t.toggleConfigPanel(...i)),class:"config-btn"}," 性能配置 ")])]),s("div",Mt,[Le(m,{elements:t.elements,"show-grid":t.showGrid,"enable-resize":t.enableResize,"resize-handles":t.resizeHandles,"snap-distance":t.snapDistance,"enable-snap":t.enableSnap,"enable-virtualization":t.enableVirtualization,"enable-spatial-grid":t.enableSpatialGrid,"enable-throttling":t.enableThrottling,"enable-monitoring":t.enableMonitoring,"show-performance-panel":t.showPerformancePanel,"performance-panel-position":t.performancePanelPosition,"performance-panel-theme":t.performancePanelTheme,"performance-panel-compact":t.performancePanelCompact,"show-fps":t.showFps,"show-render-time":t.showRenderTime,"show-drag-time":t.showDragTime,"show-memory-usage":t.showMemoryUsage,"show-element-count":t.showElementCount,"show-total-elements":t.showTotalElements,"show-performance-panel-close-button":t.showPerformancePanelCloseButton,"item-height":t.itemHeight,"item-width":t.itemWidth,buffer:t.buffer,onDragStart:t.handleDragStart,onDragMove:t.handleDragMove,onDragEnd:t.handleDragEnd,onResizeStart:t.handleResizeStart,onResizeMove:t.handleResizeMove,onResizeEnd:t.handleResizeEnd,onPerformancePanelClose:t.handlePerformancePanelClose},{"element-content":se(({element:i})=>[re(o.$slots,"element-content",{element:i},()=>[s("div",xt,[s("div",zt,I(i.content),1),s("div",Et,I(i.width)+" × "+I(i.height),1)])],!0)]),"custom-performance-metrics":se(()=>[re(o.$slots,"custom-performance-metrics",{},void 0,!0)]),_:3},8,["elements","show-grid","enable-resize","resize-handles","snap-distance","enable-snap","enable-virtualization","enable-spatial-grid","enable-throttling","enable-monitoring","show-performance-panel","performance-panel-position","performance-panel-theme","performance-panel-compact","show-fps","show-render-time","show-drag-time","show-memory-usage","show-element-count","show-total-elements","show-performance-panel-close-button","item-height","item-width","buffer","onDragStart","onDragMove","onDragEnd","onResizeStart","onResizeMove","onResizeEnd","onPerformancePanelClose"])]),s("div",St,[s("span",null,"元素数量: "+I(t.elementCount),1),t.isDragging?(D(),R("span",Pt,"拖拽中...")):W("",!0),t.isResizing?(D(),R("span",Ct,"调整大小中...")):W("",!0),t.snapLinesCount>0?(D(),R("span",Dt,"吸附线: "+I(t.snapLinesCount),1)):W("",!0)]),t.showConfigPanel?(D(),R("div",Tt,[e[47]||(e[47]=s("h3",null,"性能配置",-1)),s("div",Rt,[s("label",null,[N(s("input",{type:"checkbox","onUpdate:modelValue":e[7]||(e[7]=i=>t.enableVirtualization=i)},null,512),[[J,t.enableVirtualization]]),e[26]||(e[26]=G(" 虚拟化渲染 ",-1))]),s("label",null,[N(s("input",{type:"checkbox","onUpdate:modelValue":e[8]||(e[8]=i=>t.enableSpatialGrid=i)},null,512),[[J,t.enableSpatialGrid]]),e[27]||(e[27]=G(" 空间分区 ",-1))]),s("label",null,[N(s("input",{type:"checkbox","onUpdate:modelValue":e[9]||(e[9]=i=>t.enableThrottling=i)},null,512),[[J,t.enableThrottling]]),e[28]||(e[28]=G(" 节流优化 ",-1))]),s("label",null,[N(s("input",{type:"checkbox","onUpdate:modelValue":e[10]||(e[10]=i=>t.enableMonitoring=i)},null,512),[[J,t.enableMonitoring]]),e[29]||(e[29]=G(" 性能监控 ",-1))]),s("label",null,[N(s("input",{type:"checkbox","onUpdate:modelValue":e[11]||(e[11]=i=>t.showPerformancePanel=i)},null,512),[[J,t.showPerformancePanel]]),e[30]||(e[30]=G(" 显示性能面板 ",-1))])]),t.showPerformancePanel?(D(),R("div",kt,[e[43]||(e[43]=s("h4",null,"性能面板配置",-1)),s("label",null,[e[32]||(e[32]=G(" 位置: ",-1)),N(s("select",{"onUpdate:modelValue":e[12]||(e[12]=i=>t.performancePanelPosition=i)},e[31]||(e[31]=[s("option",{value:"top-right"},"右上角",-1),s("option",{value:"top-left"},"左上角",-1),s("option",{value:"bottom-right"},"右下角",-1),s("option",{value:"bottom-left"},"左下角",-1)]),512),[[ze,t.performancePanelPosition]])]),s("label",null,[e[34]||(e[34]=G(" 主题: ",-1)),N(s("select",{"onUpdate:modelValue":e[13]||(e[13]=i=>t.performancePanelTheme=i)},e[33]||(e[33]=[s("option",{value:"dark"},"深色",-1),s("option",{value:"light"},"浅色",-1)]),512),[[ze,t.performancePanelTheme]])]),s("label",null,[N(s("input",{type:"checkbox","onUpdate:modelValue":e[14]||(e[14]=i=>t.performancePanelCompact=i)},null,512),[[J,t.performancePanelCompact]]),e[35]||(e[35]=G(" 紧凑模式 ",-1))]),s("label",null,[N(s("input",{type:"checkbox","onUpdate:modelValue":e[15]||(e[15]=i=>t.showFps=i)},null,512),[[J,t.showFps]]),e[36]||(e[36]=G(" 显示FPS ",-1))]),s("label",null,[N(s("input",{type:"checkbox","onUpdate:modelValue":e[16]||(e[16]=i=>t.showRenderTime=i)},null,512),[[J,t.showRenderTime]]),e[37]||(e[37]=G(" 显示渲染时间 ",-1))]),s("label",null,[N(s("input",{type:"checkbox","onUpdate:modelValue":e[17]||(e[17]=i=>t.showDragTime=i)},null,512),[[J,t.showDragTime]]),e[38]||(e[38]=G(" 显示拖拽时间 ",-1))]),s("label",null,[N(s("input",{type:"checkbox","onUpdate:modelValue":e[18]||(e[18]=i=>t.showMemoryUsage=i)},null,512),[[J,t.showMemoryUsage]]),e[39]||(e[39]=G(" 显示内存使用 ",-1))]),s("label",null,[N(s("input",{type:"checkbox","onUpdate:modelValue":e[19]||(e[19]=i=>t.showElementCount=i)},null,512),[[J,t.showElementCount]]),e[40]||(e[40]=G(" 显示可见元素数 ",-1))]),s("label",null,[N(s("input",{type:"checkbox","onUpdate:modelValue":e[20]||(e[20]=i=>t.showTotalElements=i)},null,512),[[J,t.showTotalElements]]),e[41]||(e[41]=G(" 显示总元素数 ",-1))]),s("label",null,[N(s("input",{type:"checkbox","onUpdate:modelValue":e[21]||(e[21]=i=>t.showPerformancePanelCloseButton=i)},null,512),[[J,t.showPerformancePanelCloseButton]]),e[42]||(e[42]=G(" 显示关闭按钮 ",-1))])])):W("",!0),s("div",Lt,[s("label",null,[e[44]||(e[44]=G(" 虚拟化项目高度: ",-1)),N(s("input",{type:"number","onUpdate:modelValue":e[22]||(e[22]=i=>t.itemHeight=i),min:"20",max:"200",step:"10"},null,512),[[fe,t.itemHeight]])]),s("label",null,[e[45]||(e[45]=G(" 虚拟化项目宽度: ",-1)),N(s("input",{type:"number","onUpdate:modelValue":e[23]||(e[23]=i=>t.itemWidth=i),min:"50",max:"300",step:"10"},null,512),[[fe,t.itemWidth]])]),s("label",null,[e[46]||(e[46]=G(" 缓冲区大小: ",-1)),N(s("input",{type:"number","onUpdate:modelValue":e[24]||(e[24]=i=>t.buffer=i),min:"1",max:"20",step:"1"},null,512),[[fe,t.buffer]])])])])):W("",!0),s("input",{ref:"fileInput",type:"file",accept:".json",style:{display:"none"},onChange:e[25]||(e[25]=(...i)=>t.handleFileImport&&t.handleFileImport(...i))},null,544)])}const Ht=de(pt,[["render",Bt],["__scopeId","data-v-831dd789"]]),Ft={name:"App",components:{OptimizedFreeLayoutApp:Ht},setup(){const o=u(!0);return{showGrid:o,toggleGrid:()=>{o.value=!o.value,console.log("网格状态:",o.value?"显示":"隐藏")},handleDragStart:(y,P)=>{console.log("开始拖拽:",y.content)},handleDragMove:(y,P)=>{},handleDragEnd:y=>{console.log("结束拖拽:",y.content)},handleResizeStart:(y,P,X)=>{console.log("开始调整大小:",y.content,X)},handleResizeMove:(y,P)=>{},handleResizeEnd:y=>{console.log("结束调整大小:",y.content)},handleLayoutExported:y=>{console.log("布局已导出:",y)},handleLayoutImported:y=>{console.log("布局已导入:",y)}}}},Ut={class:"custom-element-content"},Vt={class:"element-title"},Gt={class:"element-info"};function It(o,e,a,t,h,f){const m=ue("OptimizedFreeLayoutApp");return D(),we(m,{title:"优化版自由布局Demo","show-grid":t.showGrid,"enable-resize":!0,"resize-handles":["se"],"snap-distance":10,"enable-snap":!0,"enable-virtualization":!0,"enable-spatial-grid":!0,"enable-throttling":!0,"enable-monitoring":!0,"show-performance-panel":!0,"performance-panel-position":"top-right","performance-panel-theme":"dark","performance-panel-compact":!1,"show-config-panel":!1,"item-height":80,"item-width":120,buffer:5,onGridToggled:t.toggleGrid,onDragStart:t.handleDragStart,onDragMove:t.handleDragMove,onDragEnd:t.handleDragEnd,onResizeStart:t.handleResizeStart,onResizeMove:t.handleResizeMove,onResizeEnd:t.handleResizeEnd,onLayoutExported:t.handleLayoutExported,onLayoutImported:t.handleLayoutImported},{"element-content":se(({element:i})=>[s("div",Ut,[s("div",Vt,I(i.content),1),s("div",Gt,I(i.width)+" × "+I(i.height),1)])]),_:1},8,["show-grid","onGridToggled","onDragStart","onDragMove","onDragEnd","onResizeStart","onResizeMove","onResizeEnd","onLayoutExported","onLayoutImported"])}const _t=de(Ft,[["render",It]]);Be(_t).mount("#app");
